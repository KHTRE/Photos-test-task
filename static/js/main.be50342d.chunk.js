(this["webpackJsonpphotos-test-task"]=this["webpackJsonpphotos-test-task"]||[]).push([[0],{15:function(e,t,c){"use strict";c.r(t);var n=c(7),s=c.n(n),a=(c(12),c(5)),r=c(2),l=c(3),o=c.n(l),i=c(1),u=c(4),d=c.n(u),b="https://jsonplaceholder.typicode.com/photos",j=function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(b,"/").concat(t),e.next=3,fetch(c,{method:"DELETE"});case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=c(0),p=function(e){var t=e.photos,c=e.setPhotos,n=e.selectedAlbum,s=e.setPagesCount,a=e.selectedPage,r=e.setSelectedPhotoId,l=function(e){r(+e.currentTarget.name)},o=function(e){m(+e.currentTarget.name);var n=t.filter((function(t){return t.id!==+e.currentTarget.name}));c(n)};return Object(h.jsx)("div",{className:"px-4 pb-4 row row-cols-1 row-cols-md-5 row-cols-sm-3 g-4",children:function(){var e=t;0!==n&&(e=t.filter((function(e){return e.albumId===n})));var c=Math.ceil(e.length/10);return s(c),e}().filter((function(e,t){return t>=10*a-10&&t<10*a})).map((function(e){return Object(h.jsx)("div",{className:"col",children:Object(h.jsxs)("div",{className:"card h-100",children:[Object(h.jsx)("button",{type:"button",onClick:l,name:String(e.id),className:"btn btn-outline-secondary",children:Object(h.jsx)("img",{src:e.thumbnailUrl,className:"card-img-top",alt:e.title})}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("span",{children:["Album: ",e.albumId]}),Object(h.jsxs)("h5",{className:"card-title text-truncate",title:e.title,children:["Title: ",e.title]})]}),Object(h.jsx)("button",{type:"button",className:"button is-danger",onClick:o,name:String(e.id),children:"Delete"})]})})}))})},O=function(e){var t=e.albums,c=e.selectedAlbum,n=e.setSelectedAlbum,s=e.setSelectedPage;return Object(h.jsx)("header",{className:"d-flex justify-content-center py-4",children:Object(h.jsxs)("label",{htmlFor:"select",children:["Select desired album: \xa0",Object(h.jsxs)("select",{id:"select",value:c,onChange:function(e){+e.target.value!==c&&(n(+e.target.value),s(1))},children:[Object(h.jsx)("option",{value:"0",children:"All albums"}),t.map((function(e){return Object(h.jsx)("option",{value:e,children:e},e)}))]})]})})},f=function(e){var t=e.pagesCount,c=e.selectedPage,n=e.setSelectedPage,s=function(e){n(+e.currentTarget.name)};return Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:"pagination justify-content-center pb-2",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){n(1)},children:"First page"}),function(){var e=[];if(t<=5)for(var n=1;n<=t;n+=1)e.push(n);else if(c<=3)for(var s=1;s<=5;s+=1)e.push(s);else if(c>3&&t-c>=2)for(var a=c-2;a<=c+2;a+=1)e.push(a);else for(var r=t-4;r<=t;r+=1)e.push(r);return e}().map((function(e){return Object(h.jsx)("li",{className:d()("page-item",{active:c===e}),children:Object(h.jsx)("button",{type:"button",className:"page-link",name:String(e),onClick:s,children:e})},e)})),Object(h.jsxs)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){n(t)},children:["Last page"," (".concat(t,")")]})]})})},x=function(e){var t=e.selectedPhotoId,c=e.photos,n=e.setSelectedPhotoId,s=c.find((function(e){return e.id===t}));return Object(h.jsxs)("div",{className:d()("modal",{"is-active":t}),children:[Object(h.jsx)("div",{className:"modal-background"}),Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsxs)("div",{className:"modal-header",children:[Object(h.jsx)("h5",{className:"modal-title",children:s&&s.title}),Object(h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){n(0)}})]}),Object(h.jsx)("div",{className:"modal-body",children:s&&Object(h.jsx)("img",{src:s.url,alt:s.title})})]})})]})},v=function(){return Object(h.jsx)("div",{className:"modal-background bg-light",children:Object(h.jsx)("div",{className:"position-absolute top-50 start-50",children:Object(h.jsx)("div",{className:"spinner-border",role:"status",children:Object(h.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},g=function(){return Object(h.jsx)("div",{className:"modal-background bg-light",children:Object(h.jsx)("span",{children:"An error ocurred while loading data from server"})})},N=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(!1),l=Object(r.a)(s,2),u=l[0],b=l[1],m=Object(i.useState)(!1),N=Object(r.a)(m,2),S=N[0],y=N[1],k=Object(i.useState)([]),P=Object(r.a)(k,2),w=P[0],C=P[1],A=Object(i.useState)(0),I=Object(r.a)(A,2),T=I[0],E=I[1],L=Object(i.useState)(1),D=Object(r.a)(L,2),F=D[0],J=D[1],B=Object(i.useState)(1),M=Object(r.a)(B,2),U=M[0],q=M[1],z=Object(i.useState)(0),G=Object(r.a)(z,2),H=G[0],K=G[1],Q=function(){var e=Object(a.a)(o.a.mark((function e(){var t,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),t=[],e.prev=2,e.next=5,j();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),b(!0);case 11:c=t.map((function(e){return e.albumId})),s=Array.from(new Set(c)),n(t),C(s),y(!1);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Q()}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{selectedPhotoId:H,photos:c,setSelectedPhotoId:K}),Object(h.jsxs)("div",{className:d()("sticky-top bg-light border-bottom mb-2",{"visually-hidden":H}),children:[Object(h.jsx)(O,{albums:w,selectedAlbum:T,setSelectedAlbum:E,setSelectedPage:J}),Object(h.jsx)(f,{selectedPage:F,setSelectedPage:J,pagesCount:U})]}),Object(h.jsx)(p,{photos:c,setPhotos:n,selectedAlbum:T,setPagesCount:q,selectedPage:F,setSelectedPhotoId:K}),S&&Object(h.jsx)(v,{}),u&&Object(h.jsx)(g,{})]})};s.a.render(Object(h.jsx)(N,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.be50342d.chunk.js.map