(this["webpackJsonpphotos-test-task"]=this["webpackJsonpphotos-test-task"]||[]).push([[0],{15:function(e,t,c){"use strict";c.r(t);var n=c(7),s=c.n(n),a=(c(12),c(5)),r=c(2),l=c(3),i=c.n(l),o=c(1),u=c(4),d=c.n(u),b="https://jsonplaceholder.typicode.com/photos",j=function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(a.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(b,"/").concat(t),e.next=3,fetch(c,{method:"DELETE"});case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=c(0),f=function(e){var t=e.photos,c=e.filteredPhotos,n=e.setPhotos,s=e.setFilteredPhotos,a=e.selectedPage,r=e.setSelectedPhotoId,l=e.itemsPerPage,i=function(e){r(+e.currentTarget.name)},o=function(e){h(+e.currentTarget.name);var a=t.filter((function(t){return t.id!==+e.currentTarget.name})),r=c.filter((function(t){return t.id!==+e.currentTarget.name}));n(a),s(r)};return Object(m.jsx)("div",{className:"px-4 pb-4 row row-cols-1 row-cols-md-5 row-cols-sm-3 g-4",children:(c.length>0?c.filter((function(e,t){return t>=a*l-l&&t<a*l})):t.filter((function(e,t){return t>=a*l-l&&t<a*l}))).map((function(e){return Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card h-100",children:[Object(m.jsx)("button",{type:"button",onClick:i,name:String(e.id),className:"btn btn-outline-secondary",children:Object(m.jsx)("img",{src:e.thumbnailUrl,className:"card-img-top",alt:e.title})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("span",{children:[Object(m.jsx)("b",{children:"Album: "}),e.albumId]}),Object(m.jsxs)("h5",{className:"card-title text-truncate",title:e.title,children:[Object(m.jsx)("b",{children:"Title: "}),e.title]})]}),Object(m.jsx)("button",{type:"button",className:"button is-danger",onClick:o,name:String(e.id),children:"Delete"})]})})}))})},O=function(e){var t=e.albums,c=e.selectedAlbum,n=e.setSelectedAlbum,s=e.setSelectedPage;return Object(m.jsx)("header",{className:"d-flex justify-content-center py-4",children:Object(m.jsxs)("label",{htmlFor:"select",children:["Select desired album: \xa0",Object(m.jsxs)("select",{id:"select",value:c,onChange:function(e){+e.target.value!==c&&(n(+e.target.value),s(1))},children:[Object(m.jsx)("option",{value:"0",children:"All albums"}),t.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))]})]})})},p=function(e){var t=e.pagesCount,c=e.selectedPage,n=e.setSelectedPage,s=e.itemsPerPage,a=e.setItemsPerPage,r=function(e){n(+e.currentTarget.name)};return Object(m.jsxs)("nav",{className:"d-flex justify-content-center align-items-baseline",children:[Object(m.jsxs)("label",{htmlFor:"select",children:["Per page: \xa0",Object(m.jsxs)("select",{id:"select",value:s,onChange:function(e){+e.target.value!==s&&(a(+e.target.value),n(1))},children:[Object(m.jsx)("option",{value:"10",children:"10"}),Object(m.jsx)("option",{value:"25",children:"25"}),Object(m.jsx)("option",{value:"50",children:"50"})]})]}),Object(m.jsxs)("ul",{className:"pagination justify-content-center pb-2",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){n(1)},children:"First page"}),function(){var e=[];if(t<=5)for(var n=1;n<=t;n+=1)e.push(n);else if(c<=3)for(var s=1;s<=5;s+=1)e.push(s);else if(c>3&&t-c>=2)for(var a=c-2;a<=c+2;a+=1)e.push(a);else for(var r=t-4;r<=t;r+=1)e.push(r);return e}().map((function(e){return Object(m.jsx)("li",{className:d()("page-item",{active:c===e}),children:Object(m.jsx)("button",{type:"button",className:"page-link",name:String(e),onClick:r,children:e})},e)})),Object(m.jsxs)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){n(t)},children:["Last page"," (".concat(t,")")]})]})]})},x=function(e){var t=e.selectedPhotoId,c=e.photos,n=e.setSelectedPhotoId,s=c.find((function(e){return e.id===t}));return Object(m.jsxs)("div",{className:d()("modal",{"is-active":t}),children:[Object(m.jsx)("div",{className:"modal-background"}),Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:s&&s.title}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){n(0)}})]}),Object(m.jsx)("div",{className:"modal-body",children:s&&Object(m.jsx)("img",{src:s.url,alt:s.title})})]})})]})},g=function(){return Object(m.jsx)("div",{className:"modal-background bg-light",children:Object(m.jsx)("div",{className:"position-absolute top-50 start-50",children:Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},v=function(){return Object(m.jsx)("div",{className:"modal-background bg-light",children:Object(m.jsx)("span",{children:"An error ocurred while loading data from server"})})},P=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(o.useState)([]),l=Object(r.a)(s,2),u=l[0],b=l[1],h=Object(o.useState)(!1),P=Object(r.a)(h,2),N=P[0],S=P[1],y=Object(o.useState)(!1),k=Object(r.a)(y,2),w=k[0],I=k[1],C=Object(o.useState)([]),A=Object(r.a)(C,2),E=A[0],T=A[1],F=Object(o.useState)(0),L=Object(r.a)(F,2),D=L[0],J=L[1],M=Object(o.useState)(1),B=Object(r.a)(M,2),U=B[0],q=B[1],z=Object(o.useState)(1),G=Object(r.a)(z,2),H=G[0],K=G[1],Q=Object(o.useState)(10),R=Object(r.a)(Q,2),V=R[0],W=R[1],X=Object(o.useState)(0),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],_=function(){var e=Object(a.a)(i.a.mark((function e(){var t,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),t=[],e.prev=2,e.next=5,j();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),S(!0);case 11:c=t.map((function(e){return e.albumId})),s=Array.from(new Set(c)),K(Math.ceil(t.length/V)),n(t),T(s),I(!1);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){var t=Math.ceil(e.length/V);K(t)};return Object(o.useEffect)((function(){_()}),[]),Object(o.useEffect)((function(){!function(){var e=c;0!==D&&(e=c.filter((function(e){return e.albumId===D}))),ee(e),b(e)}()}),[D]),Object(o.useEffect)((function(){ee(u)}),[V,u]),Object(m.jsxs)("div",{children:[Object(m.jsx)(x,{selectedPhotoId:Z,photos:c,setSelectedPhotoId:$}),Object(m.jsxs)("div",{className:d()("sticky-top bg-light border-bottom mb-2",{"visually-hidden":Z}),children:[Object(m.jsx)(O,{albums:E,selectedAlbum:D,setSelectedAlbum:J,setSelectedPage:q}),Object(m.jsx)(p,{itemsPerPage:V,setItemsPerPage:W,selectedPage:U,setSelectedPage:q,pagesCount:H})]}),Object(m.jsx)(f,{photos:c,filteredPhotos:u,setFilteredPhotos:b,setPhotos:n,selectedPage:U,setSelectedPhotoId:$,itemsPerPage:V}),w&&Object(m.jsx)(g,{}),N&&Object(m.jsx)(v,{})]})};s.a.render(Object(m.jsx)(P,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d803937a.chunk.js.map