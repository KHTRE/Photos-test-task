(this["webpackJsonpphotos-test-task"]=this["webpackJsonpphotos-test-task"]||[]).push([[0],{18:function(e,t,n){"use strict";n.r(t);var c=n(9),a=n.n(c),s=(n(15),n(4)),r=n(2),l=n(3),o=n.n(l),i=n(1),u=n(10),d="https://jsonplaceholder.typicode.com/photos",b=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(d,"/").concat(t),e.next=3,fetch(n,{method:"DELETE"});case 3:c=e.sent,console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=n(0),h=function(e){var t=e.photos,n=e.setPhotos,c=e.selectedAlbum,a=e.setPagesCount,s=e.selectedPage,r=e.setSelectedPhoto,l=function(e){r(+e.currentTarget.name)},o=function(e){j(+e.currentTarget.name);var c=Object(u.a)(t),a=c.findIndex((function(t){return t.id===+e.currentTarget.name}));c.splice(a,1),n(c)};return Object(m.jsx)("div",{className:"px-4 row row-cols-1 row-cols-md-5 row-cols-sm-3 g-4",children:function(){var e=t;0!==c&&(e=t.filter((function(e){return e.albumId===c})));var n=Math.ceil(e.length/10);return a(n),e}().filter((function(e,t){return t>=10*s-10&&t<10*s})).map((function(e){return Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card h-100",children:[Object(m.jsx)("button",{type:"button",onClick:l,name:String(e.id),className:"btn btn-outline-secondary",children:Object(m.jsx)("img",{src:e.thumbnailUrl,className:"card-img-top",alt:e.title})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("h5",{className:"card-title",children:e.title})}),Object(m.jsx)("button",{type:"button",className:"button is-danger",onClick:o,name:String(e.id),children:"Delete"})]})})}))})},p=function(e){var t=e.albums,n=e.selectedAlbum,c=e.setSelectedAlbum,a=e.setSelectedPage;return Object(m.jsx)("header",{className:"d-flex justify-content-center py-4",children:Object(m.jsxs)("label",{htmlFor:"select",children:["Select desired album: \xa0",Object(m.jsxs)("select",{id:"select",value:n,onChange:function(e){+e.target.value!==n&&(c(+e.target.value),a(1))},children:[Object(m.jsx)("option",{value:"0",children:"All albums"}),t.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))]})]})})},O=n(7),f=n.n(O),x=function(e){var t=e.pagesCount,n=e.selectedPage,c=e.setSelectedPage,a=function(e){c(+e.currentTarget.name)};return Object(m.jsx)("nav",{"aria-label":"Page navigation example",children:Object(m.jsxs)("ul",{className:"pagination justify-content-center py-4",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){c(1)},children:"First page"}),function(){var e=[];if(t<=5)for(var c=1;c<=t;c++)e.push(c);else if(n<=3)for(var a=1;a<=5;a++)e.push(a);else if(n>3&&t-n>=2)for(var s=n-2;s<=n+2;s++)e.push(s);else for(var r=t-4;r<=t;r++)e.push(r);return e}().map((function(e){return Object(m.jsx)("li",{className:f()("page-item",{active:n===e}),children:Object(m.jsx)("button",{type:"button",className:"page-link",name:String(e),onClick:a,children:e})},e)})),Object(m.jsx)("button",{type:"button",className:"btn btn-warning mx-4",onClick:function(){c(t)},children:"Last page"})]})})},v=function(e){var t=e.selectedPhoto,n=e.photos,c=e.setSelectedPhoto,a=n.find((function(e){return e.id===t}));return Object(m.jsxs)("div",{className:f()("modal",{"is-active":t}),children:[Object(m.jsx)("div",{className:"modal-background"}),Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:a&&a.title}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){c(0)}})]}),Object(m.jsx)("div",{className:"modal-body",children:a&&Object(m.jsx)("img",{src:a.url,alt:a.title})})]})})]})},g=function(){return Object(m.jsx)("div",{className:"modal-background bg-light",children:Object(m.jsx)("div",{className:"position-absolute top-50 start-50",children:Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},N=function(){return Object(m.jsx)("div",{className:"modal-background bg-light",children:Object(m.jsx)("span",{children:"An error ocurred while loading data from server"})})},S=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(!1),l=Object(r.a)(a,2),u=l[0],d=l[1],j=Object(i.useState)(!1),O=Object(r.a)(j,2),f=O[0],S=O[1],y=Object(i.useState)([]),P=Object(r.a)(y,2),k=P[0],w=P[1],C=Object(i.useState)(0),A=Object(r.a)(C,2),E=A[0],T=A[1],I=Object(i.useState)(1),L=Object(r.a)(I,2),D=L[0],F=L[1],J=Object(i.useState)(1),B=Object(r.a)(J,2),M=B[0],U=B[1],q=Object(i.useState)(0),z=Object(r.a)(q,2),G=z[0],H=z[1],K=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),t=[],e.prev=2,e.next=5,b();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),d(!0);case 11:n=t.map((function(e){return e.albumId})),a=Array.from(new Set(n)),c(t),w(a),S(!1);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){K()}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{selectedPhoto:G,photos:n,setSelectedPhoto:H}),Object(m.jsx)(p,{albums:k,selectedAlbum:E,setSelectedAlbum:T,setSelectedPage:F}),Object(m.jsx)(h,{photos:n,setPhotos:c,selectedAlbum:E,setPagesCount:U,selectedPage:D,setSelectedPhoto:H}),Object(m.jsx)(x,{selectedPage:D,setSelectedPage:F,pagesCount:M}),f&&Object(m.jsx)(g,{}),u&&Object(m.jsx)(N,{})]})};a.a.render(Object(m.jsx)(S,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3a270abe.chunk.js.map